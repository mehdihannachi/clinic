{"changed":true,"filter":false,"title":"chatNewController","tooltip":"/views/assets/js/controllers/chatNewController","value":"// chatController contoller \nmaterialAdmin.controller('chatController', function($filter, $scope, $http, $resource, $window, $state, $sessionStorage, $uibModal, $rootScope, growlService) {\n\n    $rootScope.initChat = function() {\n        console.log('initChat')\n        $scope.discussion = $sessionStorage.discussion;\n        $rootScope.user = {};\n        $scope.users;\n        $scope.allIncoming = false;\n        $http.get('/users').success(function(response) {\n            $scope.admins = response.admin;\n            $scope.doctors = response.doctor;\n            $scope.nurses = response.nurse;\n            $scope.patients = response.patient;\n\n            var connectedRemoved = $scope.admins.filter(function(user) {\n                return user.id !== $sessionStorage.connectedUser.id;\n            });\n\n            //All users = obj\n            var obj = {};\n            obj = $scope.doctors.concat($scope.admins, $scope.nurses, $scope.patients);\n            $scope.users = obj;\n            if (!$scope.users.length) {\n                $scope.errorUser = true;\n                $scope.errorMSGUser = 'No users!'\n            }\n        }).error(function(response) {\n            $scope.error = response.message;\n        });","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":29,"column":11},"action":"insert","lines":["// chatController contoller ","materialAdmin.controller('chatController', function($filter, $scope, $http, $resource, $window, $state, $sessionStorage, $uibModal, $rootScope, growlService) {","","    $rootScope.initChat = function() {","        console.log('initChat')","        $scope.discussion = $sessionStorage.discussion;","        $rootScope.user = {};","        $scope.users;","        $scope.allIncoming = false;","        $http.get('/users').success(function(response) {","            $scope.admins = response.admin;","            $scope.doctors = response.doctor;","            $scope.nurses = response.nurse;","            $scope.patients = response.patient;","","            var connectedRemoved = $scope.admins.filter(function(user) {","                return user.id !== $sessionStorage.connectedUser.id;","            });","","            //All users = obj","            var obj = {};","            obj = $scope.doctors.concat($scope.admins, $scope.nurses, $scope.patients);","            $scope.users = obj;","            if (!$scope.users.length) {","                $scope.errorUser = true;","                $scope.errorMSGUser = 'No users!'","            }","        }).error(function(response) {","            $scope.error = response.message;","        });"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":29,"column":11},"end":{"row":29,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1485872926638}